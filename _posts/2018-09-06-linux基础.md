---
layout: post
title: Linux命令
date: 2018-09-06
tag: 基础命令
---

## linux操作简介

### 1.linux系统安装
```
· 安装VMware虚拟机
  (virtual machine)指通过软件模拟的具体完整硬件系统功能的运行在一个完全隔离环境中的完整计算机系统。
· 在VM中安装linux操作系统
```

### 2.liunx目录
![](/images/posts/linuspng/image01.png)
bin     存放二进制可执行文件(ls,cat,mkdir等)

boot    存放用于系统引导时使用的各种文件

dev     用于存放设备文件

etc     存放系统配置文件

home    存放所有用户文件的根目录

lib     存放跟文件系统中的程序运行所需要的共享库及内核模式

mnt     系统管理员安装临时文件系统的安装点

opt     额外安装的可选应用程序包所放置的位置

proc    虚拟文件系统，存放当前内存的映射

root    超级用户目录

sbin    存放二进制可执行文件，只有root才能访问

tmp     用于存放各种临时文件

usr     用于存放系统应用程序，比较重要的目录/usr/local本地管理员软件安装目录

var     用于存放运行时需要改变数据的文件

### 3.linux常用命令
```
1. linux基本命令
    cd     切换目录
    man    帮助命令，相当于Windows中的help(man ls查看ls命令的使用方式    Q quit退出)
    ls     查看目录内容(ls -l/||查看详细内容；ls -a查看全部文件包括隐藏文件)
    mkdir  创建目录
    tab    自动补全
    touch  创建一个普通空白文件
    echo   把内容重定向到指定文件中，如果文件有则打开，无则创建(echo 'helloworld'>aa.txt 覆盖原有数据  >>追加)
    cat    查看文件内容
    more   查看文件内容，分页显示，按空格翻页
    cp     复制(cp aa.txt /bb  把aa.txt拷贝到目录bb下；cp aa /bb -r拷贝文件夹使用-r)
    mv     剪切、重命名(mv bb.txt ./python/py把bb.txt剪切到python/py目录下；mv bb.txt aa.txt把bb.txt重命名为aa.txt)
    rm     删除(rm aa.txt删除aa.txt)
           -f：假如要删除的文件不存在，也不提示      rm aa.txt -f
           -i：删除前提示，默认不删除，要删除输入y
           -r：递归删除      rm -r python删除python文件夹有提示；rm -rf python 删除python文件夹没有提示
    wc     统计字符数wc aa.txt
    ln     创建链接文件(默认创建的是硬连接，好比复制，单两个文件会同步)
           ln aa.txt bb 硬连接
           ln -s aa.txt bb 软连接->类似于Windows中创建一个快捷键
    pwd    查看当前路径的绝对路径
    passwd 设置密码(需要先输入原密码，在设置新密码)  passwd 修改登录人的密码；passwd zrg 修改指定人的密码
    su     切换用户(su root由其他用户切换到root目录，需要输入密码；su aa 由root用户切换到其他用户不需要输密码)
    chmod  使用权限   chmod +x file

2. linux系统命令
    stat    查看文件的详细信息 stat aa.txt
    who与whoami     who查看在线的用户；whoami查看当前自己的用户
    hostname    显示主机名
    uname   显示系统信息(uname -a 显示完整的系统信息)
    top     显示当前耗时的进行的信息，每3秒刷新一次    ctrl+c中断
    ps      显示当前进程的快照(没有自动刷新的效果)
    du      显示文件大小信息
    df      显示磁盘使用情况
    ifconfig查看或配置网卡信息，相当于Windows中的ipconfig
    ping    查看网络是否畅通
    clear   清除 Windows cls
    kill    杀死进程(kill pid  pid指进程，使用top命令或ps命令查看)
    netstat 网络连接详细信息
    useradd 操作用户
            1.切换到root用户cat/etc/passwd  查看所有用户信息
              zrg:x:500:500:zrg:/home/zrg:/bin/bash
              zrg：用户名
              x：密码已加密  加密文件存放在/etc/shadow目录下
              500：账户id  user id
              500：组id    group id
              home/zrg：该账号存放文件的默认位置
              /bin/bash：该账号shell脚本的解析方式(sh、bash、rbash)
            2.创建账号
              useradd name -d/home/name -s /bin/bash
              name：用户名
              -d：指定该用户的home路径
              -s：指定该用户的shell脚本解析方式
              操作步骤：
                  1) 创建/home/name目录
                  2) 执行useradd命令
                  3) 用passwd命令修改密码
                  4) 使用su命令切换用户
```

## 创建文件/文件夹

### 1.创建文件夹
```
创建单个文件夹：mkdir test
递归创建文件夹：mkdir -p test/a/b
```

### 2.创建文件
```
touch test.txt
```

## 把linux终端运行结果保存到文件中

### 1.将命令运行的结果保存到文件中  重定向>和>>
```
[zhu@desktop~]$ ls > ls.txt
[zhu@desktop~]$ cat ls.txt
aa.txt
2018
aa.zip

注意：
    > 是把输出转向到指定的文件，如果文件已存在的话会重新写入，文件原内容不会保留
    >> 是把输出追加到文件的后面，文件原内容会保留下来
```

### 2.在输出信息的同时把信息记录到文件中  tee
```
[zhu@desktop~]$ ls | tee ls_tee.txt
aa.txt
2019
aa.zip
[zhu@desktop~]$ cat ls_tee.txt
aa.txt
2019
aa.zip

注意：
    1.tee的作用：它从标准输入读取内容并将其写到标准输出和文件中
    2.tee可使用-a参数 保留目标文件原有的内容（-a,--append追加到文件中，而非覆盖）
```

### 3.多个命令的输出都需要记录  script
```
[zhu@desktop~]$ script
Script. started, file is typescript

[zhu@desktop~]$ ls
1.gtkrc-2.0 c.tar kmess-2.0alpha2.tar.gz secpanel-0.5.3-1.noarch.rpm
2009 DownZipAction.php kmesslog secpanel-0.5.4-2.noarch.rpm

[zhu@desktop~]$ exit
exit
Script. done, file is typescript

[zhu@desktop~]$ cat typescript
Script. started on 2009年02月08日 星期日 18时56分52秒

[zhu@desktop~]$ ls
1.gtkrc-2.0 c.tar kmess-2.0alpha2.tar.gz secpanel-0.5.3-1.noarch.rpm
2009 DownZipAction.php kmesslog secpanel-0.5.4-2.noarch.rpm

[zhu@desktop~]$ exit
exit
Script. done on 2009年02月08日 星期日 18时57分00秒

注意：
    script命令，可以记录终端的所有输出到相应的文件中

说明：
    1.我们在启动script时没有指定文件名，它会自动记录到当前目录下一个名为typescript的文件中。也可以用-a参数指定文件名
    eg：
       [zhu@desktop~]$ script -a test.txt
        Script.started,file is test.txt
        终端输出内容被记录在test.txt文件中
    2.退出script时，用exit
    3.查看typescript的内容，可以看到它同时记录下了script的启动和结束时间
```

### 4.用script录制并播放session的内容
```
可用 script把整个终端会话的所有操作和输出录制下来，然后再用scriptreplay进行播放。
如果录制时记录下来了操作时的时间数据，那么播放时和操作时的使用时间完全相同。

eg：我们可以把安装软件时编译的过程记录下来，然后给别人进行演示
[lhd@hongdi ~]$ script. -t 2>example.time -a example.txt
Script. started, file is example.txt

[lhd@hongdi ~]$ ls

说明：
    -t 2>example.time   -t是把时间数据输出到标准错误（standard error），
    所以我们使用2>example.time把数据转向到example.time这个文件中

    播放所记录的内容：
    1.安装scriptreplay
    下载：
    wget linux/utils/util-linux/util-linux-2.12r.tar.bz2">ftp://ftp.kernel.org/pub/linux/utils/util-linux/util-linux-2.12r.tar.bz2

    解压：
    tar -jxvf util-linux-2.12r.tar.bz2

    复制文件到系统的命令目录中：
    [root@hongdi 下载]# cp util-linux-2.12r/misc-utils/scriptreplay.pl /usr/bin/scriptreplay
    [root@hongdi 下载]# chmod 755 /usr/bin/scriptreplay
    备注: fedora 10的util-linux-ng-2.14.1-3.2.fc10.i386.rpm 此包中已包含 scriptreplay,已无需另行安装

    2.播放所录制的session内容
    [lhd@hongdi ~]$ scriptreplay example1.time example1.txt
    [lhd@hongdi ~]$ ls
    1.gtkrc-2.0 c.tar jeffray_lee@hotmail.com pass
    [lhd@hongdi ~]$ abcd
    bash: abcd: command not found
    [lhd@hongdi ~]$ exit
```

## 打包、压缩(解压)文件
```
1. 常见的压缩文件格式
   Windows：rar、zip
   Linux：gz、bzip、zip

2. tar打包命令(归档文件)
   tar -cxzjvf 打包后的文件  欲打包的文件
   -c：创建的一个归档文件，即打包文件
   -x：拆包
   -z：以gzip格式压缩，默认压缩倍数6倍
   -j：以bzip2格式压缩
   -v：显示打包或者拆包的文件信息
   -f：后面紧接一个归档文件
   eg：tar -cvf bao.tar /python  把当前目录下的python目录打包
       tar -xvf bao.tar拆包
3. gzip压缩文件
   压缩：
     gzip bao.tar对归档文件直接进行压缩，生成bao.tar.gz文件
   解压：
     gzip -d bao.tar.gz  把压缩文件解压成归档文件
   打包及压缩：
     tar -czvf bao.tar.gz ./python  对python文件进行打包及压缩
   拆包及解压缩：
     tar -xzvf bao.tar.gz    对bao.tar.gz进行解压
```

